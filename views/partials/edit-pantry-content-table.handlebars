<script>

function removeRowUsingButton(button, ingredientId) {

        $.ajax('/pantry-item/'+ingredientId, {

            type: 'DELETE'

        }).done(function () {

            alert('You Have Edited Your Pantry!!');
            $(button).parent().parent().remove();

        });


    };

    $(function () {

        $('#submitPantryButton').on('click', function () {

            let pantryEditList = [];

            $('.editPantryInput').each(function () {

                let itemNewQuantity = $(this).find('.itemQuantityEditInput').val().trim().toLowerCase();

                let itemNewPar = $(this).find('.itemParEditInput').val().trim().toLowerCase();

                let itemNewMeasurement = $(this).find('.editMeasurementSelector').val().trim().toLowerCase();

                let itemId = $(this).find('.itemId').val().trim().toLowerCase();

                let pantryEditDetails = {

                    item_quantity: itemNewQuantity,
                    measurement_unit: itemNewMeasurement,
                    item_id: itemId,
                    item_par: itemNewPar

                };

                pantryEditList.push(pantryEditDetails);

            });

            let pantryEditData = {

                ingredients: pantryEditList

            };

            $.ajax('/pantry-edit', {

                type: 'POST',
                data: pantryEditData

            }).done(function () {

                alert('You Have Edited Your Pantry!!');

            });

        });

            $('#pantryTab').removeClass('active');
            $('#pantryTab').addClass('link');
            $('#addTab').removeClass('active');
            $('#addTab').addClass('link');
            $('#editTab').removeClass('link');
            $('#editTab').addClass('active');


    });


</script>


<table class="table table-hover">

    <thead>

        <tr>
            <th scope="col">Food Item</th>
            <th scope="col">Quantity</th>
            <th scope="col">Par</th>
            <th scope="col">Units</th>
        </tr>

    </thead>

    <tbody>
        {{#each pantryEntries}}
        <tr class='editPantryInput'>
            <td>{{Ingredient.name}}</td>
            <td><input class="itemQuantityEditInput form-control" type="text" value='{{quantity}}'></td>
            <td><input class="itemParEditInput form-control" type="text" value='{{par}}'></td>
            <td>
                <div class="form-group">
                    <select class="editMeasurementSelector form-control" id="exampleFormControlSelect1">
                        {{#select measurement_unit}}
                        <option>Each</option>
                        <option>Ounces</option>
                        <option>Pounds</option>
                        <option>Cups</option>
                        <option>Fl. Ounces</option>
                        {{/select}}
                    </select>
                </div>
                <input class="itemId form-control" type="hidden" value='{{IngredientId}}'>
            </td>
            <td><button onclick="removeRowUsingButton(this,{{IngredientId}}); return false;" type="button"
                    class="removeIngredientButton btn btn-outline-danger">x</button></td>
        </tr>
        {{/each}}
    </tbody>

</table>

<div>

    <button id='submitPantryButton' type="button" class="btn btn-outline-success">Submit</button>

</div>